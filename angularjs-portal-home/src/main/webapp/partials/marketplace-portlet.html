<div class="portlet-list-item" >
  <h2>
    <span class="fa fa-circle" ng-show="portlet.faIcon === null"></span>
    <span class="fa {{::portlet.faIcon}}" ng-show="portlet.faIcon != null"></span>
    <span class="portlet-title">{{::portlet.title}}</span>
  </h2>
  <div class="action-buttons" ng-click="showDetails = !showDetails">

    <!-- Add to Home button with access -->
    <button class="btn btn-primary fname-{{::portlet.fname}}"
            ng-click="marketplaceCtrl.addToHome($index , portlet)"
            ng-if="portlet.canAdd && !portlet.hasInLayout"
            ng-class="{disabled : portlet.hasInLayout}">
      <span class="fa fa-plus"></span>Add to Favorites
    </button>

    <!-- Already in Home -->
    <button class="btn btn-disabled fname-{{::portlet.fname}}"
            ng-if="portlet.canAdd && portlet.hasInLayout"
            ng-class="{'btn-disabled' : portlet.hasInLayout}"
            popover="This app is already in your favorites"
            popover-trigger="mouseenter"
            popover-placement="top"
            popover-popup-delay="500">
      <i class="fa fa-check"></i>Already in Favorites
    </button>

    <!-- Add to Home button without access -->
    <button class="btn btn-disabled" ng-hide="portlet.canAdd" popover="You do not have access to this app" popover-trigger="mouseenter" popover-placement="top" popover-popup-delay="500">
      <span class="fa fa-plus"></span>Add to Favorites
    </button>

    <!-- Launch button with access -->
    <a class="btn btn-success" href="{{::portlet.maxUrl}}" target="{{::portlet.target}}" ng-if="portlet.canAdd"><span class="fa fa-arrow-circle-o-right"></span>Launch</a>

    <!-- Launch button without access -->
    <a class="btn btn-disabled" href ng-hide="portlet.canAdd" popover="You do not have access to this app" popover-trigger="mouseenter" popover-placement="top" popover-popup-delay="500"><span class="fa fa-arrow-circle-o-right"></span>Launch</a>

  </div><br>
  <span><rating ng-model="portlet.rating" readonly="true" class="rating"></rating>
    ( {{::portlet.userRated}} rating<span ng-if="portlet.userRated !== 1">s</span> )
  </span>
  <span> | <button ng-click="openRating('sm',portlet.fname, portlet.title)" class="btn btn-default">Rate</button></span>
  <p>{{::portlet.description}}</p>
  <div class="category-list" ng-click="showDetails = !showDetails">
    <a ng-repeat="category in portlet.categories" href="" ng-click="selectFilter('category',category)" class="category-links">{{::category}}</a>
    <div class="portlet-details">
      <a ng-click="showDetails = !showDetails">Details <i class="fa fa-angle-down" ng-show="!showDetails"></i><i class="fa fa-angle-up" ng-show="showDetails"></i></a>
    </div>
  </div>
  
  

  <!-- Action buttons for mobile -->
  <div class="action-buttons-mobile" ng-click="showDetails = !showDetails">

    <!-- Add to Home button with access on mobile-->
    <button class="btn btn-primary fname-{{::portlet.fname}}" ng-click="marketplaceCtrl.addToHome($index , portlet)" ng-show="portlet.canAdd">
      <span class="fa fa-plus"></span>Add to Favorites
    </button>

    <!-- Add to Home button without access on mobile-->
    <button class="btn btn-disabled" ng-hide="portlet.canAdd" popover="You do not have access to this app" popover-trigger="mouseenter" popover-placement="top" popover-popup-delay="500">
      <span class="fa fa-plus"></span>Add to Favorites
    </button>

    <!-- Launch button with access on mobile-->
    <a class="btn btn-success" href="{{::portlet.maxUrl}}" ng-show="portlet.canAdd"><span class="fa fa-arrow-circle-o-right"></span>Launch</a>

    <!-- Launch button without access on mobile-->
    <a class="btn btn-disabled" href ng-hide="portlet.canAdd" popover="You do not have access to this app" popover-trigger="mouseenter" popover-placement="top" popover-popup-delay="500"><span class="fa fa-arrow-circle-o-right"></span>Launch</a>
  </div>

  

  <!-- Portlet Details (hidden by default) -->
  <div ng-if="showDetails" class="row portlet-details-div">
    <div class="col-xs-12 col-sm-3 related-portlets">
      <h3>Related Apps</h3>
      <ul >
        <li ng-repeat="related in portlet.relatedPortlets"><a href="#/apps/search/{{ ::related.title }}">{{ ::related.title }}</a></li>
      </ul>
    </div>
    <div class="col-xs-12 col-sm-9 portlet-screenshots" ng-if="portlet.marketplaceScreenshots.length !== 0">
      <h3>Screenshots</h3>
<<<<<<< HEAD
      
      <ul class="enlarge" ng-repeat="screenshot in portlet.marketplaceScreenshots">
        <li>
          <img ng-src="{{ ::screenshot.url }}" width ="320px" alt="{{ ::screenshot.captions }}">
          <span>
          	<img ng-src="{{ ::screenshot.url }}" alt="{{ ::screenshot.captions }}">
          	<p ng-repeat="caption in screenshot.captions">{{ ::caption }}</p>
          </span>
          
>>>>>>> MUMUP-1470: Bigger Screenshots
        </li>
      </ul>
    </div>
    
    <div class="col-xs-12 col-sm-3 related-portlets" ng-if="$storage.showKeywordsInMarketplace">
        <h3>Keywords</h3>
      <ul >
        <li ng-repeat="keyword in portlet.keywords | orderBy:'toLowerCase()'  track by $index"><a href='#/apps/search/{{ ::keyword }}'>{{ ::keyword }}</a></li>
        <li ng-if="portlet.keywords == null || portlet.keywords.length == 0">(no keywords set)</li>
      </ul>
    </div>
  </div>

</div>
