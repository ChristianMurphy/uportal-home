
<div ng-controller="MarketplaceController as marketplaceCtrl" class="row portlet-frame marketplace col-xs-12 col-md-12 no-padding">
  <app-header app-title="Browse {{NAMES.title}}"
              app-icon="fa-home">
  </app-header>
  <div class="marketplace-body">
    <div class="mp-header">
      <div class="browse-help">
        <p class="hidden-xs">What are you looking for?</p>
        <p class="visible-xs"><i class="fa fa-search"></i></p>
      </div>
      <div class="browse-input">
        <input type="text" class="hidden-xs marketplace-search" placeholder="e.g. Benefits Information" ng-model="searchText" select-on-page-load aria-label="Search bar enter the app you are looking for">
        <input type="text" class="visible-xs marketplace-search" placeholder="What are you looking for?" ng-model="searchText" select-on-page-load aria-label="Search bar enter the app you are looking for">
      </div>
    </div>

		<md-tabs md-dynamic-height md-border-bottom>
			<md-tab label="Most Popular" md-on-select="selectFilter('popular','')" aria-label="Sort by popularity">
				<md-content>
					<loading-gif data-object='portlets'></loading-gif>
					<div class="portlet-container"
					     ng-repeat="portlet in portlets | filter:searchTermFilter | showApplicable:showAll | showCategory:categoryToShow | orderBy:['-rating','-userRated'] | limitTo:searchResultLimit"
					     ng-class="{portlet_hover: hover}" ng-mouseenter="hover = true" ng-mouseleave="hover = false"
					     ng-click="showDetails = !showDetails">
						<marketplace-entry ng-cloak></marketplace-entry>
					</div>
					<marketplace-load-more ng-show="(portlets | filter:searchTermFilter | showApplicable:showAll | showCategory:categoryToShow).length > searchResultLimit"></marketplace-load-more>
					<marketplace-no-results ng-show="portlets.length > 0 && (portlets | filter:searchTermFilter | showApplicable:showAll | showCategory:categoryToShow).length == 0"></marketplace-no-results>
				</md-content>
			</md-tab>
			<md-tab label="A-Z" md-on-select="selectFilter('az','')" aria-label="Sort by alphabetical order">
				<md-content ng-cloak>
					<loading-gif data-object='portlets'></loading-gif>
					<div class="portlet-container"
					     ng-repeat="portlet in portlets | filter:searchTermFilter | showApplicable:showAll | showCategory:categoryToShow | orderBy:'name' | limitTo:searchResultLimit"
					     ng-class="{portlet_hover: hover}" ng-mouseenter="hover = true" ng-mouseleave="hover = false"
					     ng-click="showDetails = !showDetails">
						<marketplace-entry ng-cloak></marketplace-entry>
					</div>
					<marketplace-load-more ng-show="(portlets | filter:searchTermFilter | showApplicable:showAll | showCategory:categoryToShow).length > searchResultLimit"></marketplace-load-more>
					<marketplace-no-results ng-show="portlets.length > 0 && (portlets | filter:searchTermFilter | showApplicable:showAll | showCategory:categoryToShow).length == 0"></marketplace-no-results>
				</md-content>
			</md-tab>
			<md-tab label="Categories" md-on-select="selectFilter('category','')" aria-label="Filter by categories">
				<md-content ng-cloak>
					<div class="show-categories">
						<p>Categories:</p><a ng-repeat="category in categories" href="" class="btn btn-outline btn-sm category-links" ng-click="selectFilter('category',category)" ng-class="{true: 'selected-category'}[categoryToShow === category]">{{category}}</a>
					</div>
					<loading-gif data-object='portlets'></loading-gif>
					<div class="portlet-container"
					     ng-repeat="portlet in portlets | filter:searchTermFilter | showApplicable:showAll | showCategory:categoryToShow | orderBy:'name' | limitTo:searchResultLimit"
					     ng-class="{portlet_hover: hover}" ng-mouseenter="hover = true" ng-mouseleave="hover = false"
					     ng-click="showDetails = !showDetails">
						<marketplace-entry ng-cloak></marketplace-entry>
					</div>
					<div class="marketplace-load-more">
						<button class="btn btn-primary btn-lg"
						        ng-click="searchResultLimit = searchResultLimit + 20;"
						        hide-while-loading
						        ng-show="(portlets | filter:searchTermFilter | showApplicable:showAll | showCategory:categoryToShow).length > searchResultLimit"
										>Load More</button>
					</div>
					<marketplace-load-more ng-show="(portlets | filter:searchTermFilter | showApplicable:showAll | showCategory:categoryToShow).length > searchResultLimit"></marketplace-load-more>
					<marketplace-no-results ng-show="portlets.length > 0 && (portlets | filter:searchTermFilter | showApplicable:showAll | showCategory:categoryToShow).length == 0"></marketplace-no-results>
				</md-content>
			</md-tab>
		</md-tabs>

		<!-- CHANGE INNER NAV TO MATERIAL TABS -->
	  <rating-modal-template></rating-modal-template>
	</div>
</div>